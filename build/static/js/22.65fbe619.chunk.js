"use strict";(self.webpackChunktochly=self.webpackChunktochly||[]).push([[22],{7500:(t,e,n)=>{n.d(e,{I:()=>r});var i=n(6254),o=n(8754);const r=(t,e,n)=>{t({token:n}).unwrap().then((t=>{localStorage.removeItem("invitationToken"),(0,o.xm)((0,o.hb)(),{team_id:t.data.tid,receiver_id:String(t.data.user_id)})})).catch((t=>{406===(null===t||void 0===t?void 0:t.status)?i.Am.error(e("Invitation token has expired!")):i.Am.error(e("An unexpected error occurred. Please try again."))}))}},6022:(t,e,n)=>{n.r(e),n.d(e,{default:()=>p});var i=n(894),o=n(7969),r=n(2169),a=n(7313),c=n(6254),s=n(8467),u=n(2135),d=n(5590),l=n(8437),v=n(5383),m=n(8337),h=n(7500);var g=n(6417);const p=()=>{const[t]=(0,r.PQ)();return function(t,e){const n=(0,l.T)(),i=(0,s.s0)(),{t:o}=(0,d.$G)(),[r]=(0,u.lr)(),g=(0,a.useRef)(!1),[p]=(0,v._J)();(0,a.useEffect)((()=>{const a=r.get("state"),s=r.get("code");return a&&s&&!g.current&&e({provider:t,state:a,code:s}).unwrap().then((()=>{n((0,m.QV)());const t=localStorage.getItem("invitationToken");t&&(0,h.I)(p,o,t),c.Am.success(o("Logged in")),i("/")})).catch((()=>{c.Am.error(o("Login failed!")),i("/auth/login")})),()=>{g.current=!0}}),[t,e,r])}("google-oauth2",t),(0,g.jsx)(i.Z,{className:"justify-content-center text-center mt-5",children:(0,g.jsx)(o.Z,{animation:"border"})})}},5383:(t,e,n)=>{n.d(e,{DS:()=>o,_J:()=>r});const i=n(8880).g.injectEndpoints({endpoints:t=>({sendInvitation:t.mutation({query:t=>{let{tid:e,inviteeEmail:n,role:i,invitedBy:o,url:r}=t;return{url:"/invitations/send-invite/",method:"POST",body:{tid:e,role:i,url:r,invitee_email:n,invited_by:o}}}}),acceptInvitation:t.mutation({query:t=>({url:"/invitations/accept-invite/",method:"POST",body:t})})})}),{useSendInvitationMutation:o,useAcceptInvitationMutation:r}=i}}]);