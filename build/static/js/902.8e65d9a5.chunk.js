"use strict";(self.webpackChunktochly=self.webpackChunktochly||[]).push([[902],{7500:(e,t,r)=>{r.d(t,{I:()=>s});var n=r(6254),i=r(8754);const s=(e,t,r)=>{e({token:r}).unwrap().then((e=>{localStorage.removeItem("invitationToken"),(0,i.xm)((0,i.hb)(),{team_id:e.data.tid,receiver_id:String(e.data.user_id)})})).catch((e=>{406===(null===e||void 0===e?void 0:e.status)?n.Am.error(t("Invitation token has expired!")):n.Am.error(t("An unexpected error occurred. Please try again."))}))}},3902:(e,t,r)=>{r.r(t),r.d(t,{default:()=>q});var n=r(894),i=r(6782),s=r(5399),a=r(238),o=r(3516),l=r(6597),c=r(7313),d=r(5192),m=r.n(d),u=r(6123),h=r.n(u),p=r(986),g=["className","cssModule","row","disabled","check","inline","floating","noMargin","tag","switch"];function v(){return v=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},v.apply(this,arguments)}function b(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},s=Object.keys(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}var f={children:m().node,row:m().bool,check:m().bool,switch:m().bool,inline:m().bool,floating:m().bool,noMargin:m().bool,disabled:m().bool,tag:p.iC,className:m().string,cssModule:m().object};function x(e){var t=e.className,r=e.cssModule,n=e.row,i=e.disabled,s=e.check,a=e.inline,o=e.floating,l=e.noMargin,d=e.tag,m=void 0===d?"div":d,u=e.switch,f=b(e,g),x=s||u,j=(0,p.mx)(h()(t,!!n&&"row",!!x&&"form-check",!!u&&"form-switch",!x&&!l&&"mb-3",!(!x||!a)&&"form-check-inline",!(!x||!i)&&"disabled",o&&"form-floating"),r);return"fieldset"===m&&(f.disabled=i),c.createElement(m,v({},f,{className:j}))}x.propTypes=f;const j=x;var y=r(1781),w=r(4209),N=r(8467),k=r(2135),I=r(5590),S=r(6254),O=r(182),T=r(3503),E=r(1933),P=r(8437),A=r(5383),Z=r(2169),_=r(8337),C=r(7500),M=r(2829),B=r(454),L=r(6417);const q=()=>{var e,t;const{t:r}=(0,I.$G)(),c=(0,P.T)(),d=(0,N.s0)(),m=(0,N.TH)(),{isAuthenticated:u}=(0,P.C)((e=>e.auth)),[h,{isLoading:p}]=(0,Z.YA)(),[g]=(0,A._J)(),v=(null===(e=m.state)||void 0===e||null===(t=e.from)||void 0===t?void 0:t.pathname)||"/",b=(0,T.TA)({initialValues:{email:"",password:""},validationSchema:E.Ry({email:E.Z_().required(r("Please Enter Your Email")),password:E.Z_().required(r("Please Enter Your Password"))}),onSubmit:e=>{h({email:e.email,password:e.password}).unwrap().then((()=>{c((0,_.QV)());const e=localStorage.getItem("invitationToken");e&&(0,C.I)(g,r,e),S.Am.success(r("Logged in successfully")),d(v,{replace:!0})})).catch((e=>{401===(null===e||void 0===e?void 0:e.status)?S.Am.error(r("Invalid credentials")):S.Am.error(r("An unexpected error occurred. Please try again."))}))}});return u?(0,L.jsx)(N.Fg,{to:"/"}):(0,L.jsxs)(L.Fragment,{children:[(0,L.jsxs)(O.q,{children:[(0,L.jsx)("title",{children:"Login | Tochly"}),(0,L.jsx)("meta",{name:"description",content:"Tochly sign up page"})]}),(0,L.jsx)("div",{className:"account-pages my-5 pt-sm-5",children:(0,L.jsx)(n.Z,{children:(0,L.jsx)(i.Z,{className:"justify-content-center",children:(0,L.jsxs)(s.Z,{md:8,lg:6,xl:5,children:[(0,L.jsx)(M.h4,{title:r("Sign in"),description:r("Sign in to continue to Tochly")}),(0,L.jsx)(a.Z,{children:(0,L.jsx)(o.Z,{className:"p-4",children:(0,L.jsx)("div",{className:"p-3",children:(0,L.jsxs)(l.Z,{onSubmit:b.handleSubmit,children:[(0,L.jsx)("div",{className:"mb-3",children:(0,L.jsx)(B.BK,{label:r("Email"),fieldName:"email",type:"text",value:b.values.email,inputError:b.errors.email,placeholder:"Enter email",classNameGroup:"mb-3 bg-soft-light rounded-3",classNameInput:"form-control form-control-lg border-light bg-soft-light",classNameInputIcon:"ri-mail-line",invalid:!(!b.touched.email||!b.errors.email),onChange:b.handleChange,onBlur:b.handleBlur})}),(0,L.jsxs)(j,{className:"mb-4",children:[(0,L.jsx)("div",{className:"float-end",children:(0,L.jsxs)(k.rU,{to:"/auth/forget-password",className:"text-muted font-size-13",children:[r("Forgot password"),"?"]})}),(0,L.jsx)(B.BK,{label:"Password",fieldName:"password",type:"password",value:b.values.password,inputError:b.errors.password,placeholder:"Enter Password",classNameGroup:"mb-3 bg-soft-light rounded-3",classNameInput:"form-control form-control-lg border-light bg-soft-light",classNameInputIcon:"ri-user-2-line",invalid:!(!b.touched.password||!b.errors.password),onChange:b.handleChange,onBlur:b.handleBlur})]}),(0,L.jsxs)("div",{className:"form-check mb-4",children:[(0,L.jsx)(y.Z,{type:"checkbox",className:"form-check-input",id:"remember-check"}),(0,L.jsx)(w.Z,{className:"form-check-label",htmlFor:"remember-check",children:r("Remember me")})]}),(0,L.jsx)("div",{className:"d-grid",children:(0,L.jsx)(B.Hk,{buttonText:r("Login"),isLoading:p,color:"primary",className:"waves-effect waves-light",type:"submit"})})]})})})}),(0,L.jsx)("div",{className:"ms-1",children:(0,L.jsx)(M.LO,{type:"Signin"})}),(0,L.jsxs)("div",{className:"mt-5 text-center",children:[(0,L.jsxs)("p",{children:[r("Don't have an account")," ?"," ",(0,L.jsx)(k.rU,{to:"/auth/register",className:"font-weight-medium text-primary",children:r("Signup now")})]}),(0,L.jsxs)("p",{children:["\xa9 ",(new Date).getFullYear()," Tochly."]})]})]})})})})]})}},5383:(e,t,r)=>{r.d(t,{DS:()=>i,_J:()=>s});const n=r(8880).g.injectEndpoints({endpoints:e=>({sendInvitation:e.mutation({query:e=>{let{tid:t,inviteeEmail:r,role:n,invitedBy:i,url:s}=e;return{url:"/invitations/send-invite/",method:"POST",body:{tid:t,role:n,url:s,invitee_email:r,invited_by:i}}}}),acceptInvitation:e.mutation({query:e=>({url:"/invitations/accept-invite/",method:"POST",body:e})})})}),{useSendInvitationMutation:i,useAcceptInvitationMutation:s}=n}}]);